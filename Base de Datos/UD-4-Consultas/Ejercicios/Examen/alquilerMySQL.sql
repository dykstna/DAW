CREATE DATABASE ALQUILER;
USE ALQUILER;

/*RELACION*/
/*CLIENTE-RESERVA-INCLUYE-COCHE*/

/* Borrado de tablas*/
DROP TABLE INCLUYE;
DROP TABLE COCHE;
DROP TABLE RESERVA;
DROP TABLE CLIENTE;

/*Creaci√≥n de tablas*/

CREATE TABLE CLIENTE(
    COD_CLIENTE VARCHAR(5),
    DNI VARCHAR(9),
    NOMBRE VARCHAR(25) NOT NULL,
    DIRECCION VARCHAR(50),
    TELEFONO INT(9),
    CONSTRAINT COD_CLIENTE_PK PRIMARY KEY(COD_CLIENTE),
    CONSTRAINT NOMBRE_CLIENTE_UNIQUE UNIQUE(NOMBRE)
);



CREATE TABLE RESERVA(
    NUMERO INT(4),
    FECHA_INICIO DATE,
    FECHA_FIN DATE,
    PRECIO_TOTAL DECIMAL(6,2),
    COD_CLIENTE VARCHAR(5),
    CONSTRAINT NUMERO_PK PRIMARY KEY(NUMERO),
    CONSTRAINT COD_CLIENTE_FK FOREIGN KEY(COD_CLIENTE) REFERENCES CLIENTE(COD_CLIENTE)
);

CREATE TABLE COCHE(
    MATRICULA VARCHAR(7),
    MARCA VARCHAR(20) NOT NULL,
    MODELO VARCHAR(20) NOT NULL,
    COLOR VARCHAR(10),
    PRECIO_DIA DECIMAL(4,2),
    CONSTRAINT MATRICULA_PK PRIMARY KEY(MATRICULA),
    CONSTRAINT PRECIO_HORA_CHK CHECK(PRECIO_DIA<99.99)
);

CREATE TABLE INCLUYE(
    NUMERO INT(4),
    MATRICULA VARCHAR(7),
    LITROS_GAS DECIMAL(4,2),
    CONSTRAINT INCLUYE_PK PRIMARY KEY(NUMERO, MATRICULA),
    CONSTRAINT NUMERO_FK FOREIGN KEY(NUMERO) REFERENCES RESERVA(NUMERO),
    CONSTRAINT MATRICULA_FK FOREIGN KEY(MATRICULA) REFERENCES COCHE(MATRICULA),
    CONSTRAINT LITROS_GAS_CHK CHECK(LITROS_GAS<99.99)
);

/*INSERTAR REGISTROS TABLA CLIENTE*/
INSERT INTO CLIENTE
VALUES("00001", "12345678S", "ANTONIO", NULL, "685124124");

INSERT INTO CLIENTE
VALUES("00002", "87654321B", "MARIA", "CALLE GENIL, 12", NULL);

INSERT INTO CLIENTE
VALUES("00003", "23456781A", "MANUEL", "CALLE NUEVA, 1", "623123456");

INSERT INTO CLIENTE
VALUES("00004", "76543218D", "ANA", "CALLE VIEJA, 2", "666222333");

INSERT INTO CLIENTE
VALUES("00005", "34567812C", "MIGUEL", "AVDA ALEGRIA, 4", "611444555");

INSERT INTO CLIENTE
VALUES("00006", "65432178E", "ROSA", "AVDA JUVENTUD, 5", NULL);

INSERT INTO CLIENTE
VALUES("00007", "78456123R", "LUIS", NULL, "633234765");

INSERT INTO CLIENTE
VALUES("00008", "32155654M", "LUISA", "CALLE FLOR, 34", NULL);

INSERT INTO CLIENTE
VALUES("00009", "67811987Z", "JOSE CARLOS", "CALLE AMAPOLA, 14", "675543776");

INSERT INTO CLIENTE
VALUES("00010", "76543218P", "MARIA LUISA", "CALLE NARDO, 6", NULL);


/*INSERTAR REGISTROS TABLA RESERVA (el valor del numero no se le da porque se auto incrementa solo)*/
INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(1, "2022-12-01", "2022-12-10", 181.80, "00001");

INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(2, "2022-12-06", "2022-12-15", 226.80, "00002");
INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(3, "2021-12-06", "2021-12-15", 270, "00002");

INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(4, "2019-12-06", "2019-12-15", 202.5, "00002");

INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(5, "2022-07-15", "2022-07-21", 243, "00003");

INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(6, "2022-01-06", "2022-01-15", 454.5, "00004");

INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(7, "2021-02-06", "2021-02-15", 181.80, "00005");
INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(8, "2020-05-06", "2020-06-15", 1008, "00005");

INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(9, "2022-09-06", "2022-09-15", 270, "00006");
INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(10, "2021-10-06", "2021-10-15", 202.5, "00006");
INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(11, "2020-06-21", "2020-06-30", 364.5, "00007");

INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(12, "2023-01-01", "2023-01-15", 707, "00008");
INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(13, "2022-08-07", "2022-08-15", 161.6, "00008");
INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(14, "2020-11-21", "2020-11-30", 226.8, "00009");

INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(15, "2021-08-15", "2021-08-21", 180, "00009");
INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(16, "2022-09-21", "2022-09-30", 202.5, "00010");

INSERT INTO RESERVA(NUMERO, FECHA_INICIO, FECHA_FIN, PRECIO_TOTAL, COD_CLIENTE)
VALUES(17, "2022-12-24", "2022-12-31", 157.5, "00002");
/*INSERTAR REGISTROS TABLA COCHE (no podemos dejar a null la marca ni el modelo y el valor del precio_hora debe ser inferior a 99.99)*/
INSERT INTO COCHE
VALUES("1234ABC", "OPEL", "CORSA", NULL, 20.2);

INSERT INTO COCHE
VALUES("5678FKL", "FORD", "FIESTA", "AZUL", 25.2);

INSERT INTO COCHE
VALUES("2345GLM", "CITROEN", "C4", "BLANCO", 30);

INSERT INTO COCHE
VALUES("3456GAB", "SEAT", "IBIZA", "ROJO", 22.5);

INSERT INTO COCHE
VALUES("3458GXY", "RENAULT", "SCENIC", "ROJO", 40.5);

INSERT INTO COCHE
VALUES("4567GDE", "SEAT", "ALHAMBRA", "BLANCO", 50.5);

INSERT INTO COCHE
VALUES("5678HIJ", "Audi", "A3", "Negro", 45); /*Este coche no se 
reserva nunca*/

/*INSERTAR REGISTROS TABLA INCLUYE*/
INSERT INTO INCLUYE
VALUES(1,"1234ABC", 10);

INSERT INTO INCLUYE
VALUES(2,"5678FKL", 20);

INSERT INTO INCLUYE
VALUES(3,"2345GLM", 30);

INSERT INTO INCLUYE
VALUES(4,"3456GAB", 11);

INSERT INTO INCLUYE
VALUES(5,"3458GXY", 15);

INSERT INTO INCLUYE
VALUES(6,"4567GDE", 50);

INSERT INTO INCLUYE
VALUES(7,"1234ABC", 12);

INSERT INTO INCLUYE
VALUES(8,"5678FKL", 11);

INSERT INTO INCLUYE
VALUES(9,"2345GLM", 10);

INSERT INTO INCLUYE
VALUES(10,"3456GAB", 12);

INSERT INTO INCLUYE
VALUES(11,"3458GXY", 12);

INSERT INTO INCLUYE
VALUES(12,"3456GAB", 11);

INSERT INTO INCLUYE
VALUES(13,"1234ABC", 10);

INSERT INTO INCLUYE
VALUES(14,"5678FKL", 12);

INSERT INTO INCLUYE
VALUES(15,"2345GLM", 12);

INSERT INTO INCLUYE
VALUES(16,"3456GAB", 11);

INSERT INTO INCLUYE
VALUES(17,"3456GAB", 14);



